#!/data/data/com.termux/files/usr/bin/zsh
# ğŸ”° MEDIA DOWNLOADER v3.0"
# ğ‘¬ğ‘»ğ‘¯ğ‘°ğ‘ªğ‘¨ğ‘³ ğ‘ªğ’€ğ‘©ğ‘¬ğ‘¹ğ‘ºğ‘¬ğ‘ªğ‘¼ğ‘¹ğ‘°ğ‘»ğ’€ â„¢
# GITHUB: https://github.com/imcoolbooy

BASE_DIR="$HOME/storage/shared/IM-COOL-BOOY/COOLBOOY"
fpath="$BASE_DIR/%(id)s.%(ext)s"
COOKIES_DIR="$BASE_DIR"
fb_cookies="$COOKIES_DIR/cookies.txt"

mkdir -p "$BASE_DIR"

if [[ "$1" == *"shorts"* ]]; then
    echo "âœ… Downloading Shorts video compatible..."
    yt-dlp --remote-components ejs:github \
      -f "bestvideo[vcodec^=avc1][height<=1080]+bestaudio[ext=m4a]/best" \
      --merge-output-format mp4 \
      -o "$fpath" "$1"
    exit
fi

echo -e "\e[031m" " â–„ â–ˆ   â–„â–€â–€â–€â–€â–€â–„   â–ˆ â–„  ğŸ”° MEDIA DOWNLOADER v3.0"
echo -e "\e[031m" "â–„â–„â–€â–„   â–ˆâ”€â–€â”€â–€â”€â–ˆ  â–„â–€â–„â–„  ğŸŒ With Enhanced Speed"
echo -e "\e[031m" "     â–€â–„â–’â–’â–’â–’â–’â–’â–’â–’â–’â–„â–€    --------------------"
echo -e "\e[031m" "     â–ˆâ”€â”€â”€â”€â–€â”€â”€â”€â”€â–ˆ       ğŸ‰ï¸ Check out my Github"
echo -e "\e[031m" "     â–ˆâ”€â”€â”€â”€â–€â”€â”€â”€â”€â–ˆ       âœ¨ï¸ For More info...   "
echo -e "\e[036m" "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
echo -e "\e[032m" "â•‘ â™š Project Name : ğŸ”° MEDIA DOWNLOADER v3.0      â•‘"
echo -e "\e[032m" "â•‘ â™š Author : ğ“†©ğˆğŒ ğ‚ğğğ‹ ğğğğ˜ ğ“¢ğ“±ğ“ªğ“­ğ“¸ğ”€ ğ“šğ“²ğ“·ğ“° ğ“†ª         â•‘"
echo -e "\e[032m" "â•‘ â™š Github : https://github.com/imcoolbooy       â•‘"
echo -e "\e[032m" "â•‘ â™š ğ—£ğ—¢ğ—ªğ—˜ğ—¥ ğ—•ğ—¬ : ğ‘¬ğ‘»ğ‘¯ğ‘°ğ‘ªğ‘¨ğ‘³ ğ‘ªğ’€ğ‘©ğ‘¬ğ‘¹ğ‘ºğ‘¬ğ‘ªğ‘¼ğ‘¹ğ‘°ğ‘»ğ’€ â„¢           â•‘"
echo -e "\e[036m" "â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo -e "\e[036m" "â• â•â–¶ [ğ—¦ğ—²ğ—¹ğ—²ğ—°ğ˜ ğ—” ğ—™ğ—¼ğ—¿ğ—ºğ—®ğ˜]  â³"
echo -e "\e[032m" "â• â•â–¶ 0. Facebook Cookies Setup"
echo -e "\e[032m" "â• â•â–¶ 1. Music Mp3â™«"
echo -e "\e[032m" "â• â•â–¶ 2. Video 360p"
echo -e "\e[032m" "â• â•â–¶ 3. Video 480p"
echo -e "\e[032m" "â• â•â–¶ 4. Video 720p"
echo -e "\e[032m" "â• â•â–¶ 5. Video 1080p"
echo -e "\e[032m" "â• â•â–¶ 6. Video 2160p"
echo -e "\e[032m" "â• â•â–¶ 7. Facebook Video 1080p"
echo -e "\e[032m" "â• â•â–¶ 8. Exit Tool"
echo -e "\e[032m" "â• â•â–¶ A. About."
printf "\e[032m â•šâ•:â¤ \e[0m "
read choice


case "$choice" in
0)
    echo -e "\e[036mğŸŒ Facebook Cookies Setup.\e[0m"
    echo -e "\e[033mğŸ”„ Paste FULL cookies (Netscape format) below.\e[0m"
    echo -e "\e[036mğŸ’¾ CTRL+D to save.\e[0m"
    echo "--------------------------------"
    cat > "$fb_cookies"
    if [ -s "$fb_cookies" ]; then
        echo -e "\e[032mâœ… Cookies saved successfully\e[0m"
        echo -e "\e[032mğŸ’¾ Location: /storage/shared/IM-COOL-BOOY/COOLBOOY\e[0m"
    else
        echo -e "\e[031mâŒ Cookies save failed.!\e[0m"
    fi
    ;;

    1)
        echo "ğŸ”° Option 1 selected."
        echo "âœ… Downloading audio in best quality. (m4a)"
        yt-dlp -f 'bestaudio[ext=m4a]/bestaudio' -o "$fpath" "$1"
        ;;

    2)
        echo "ğŸ”° Option 2 selected."
        echo "âœ… Downloading video with best quality up to 360p"
        yt-dlp -f 'bestvideo[height<=360]+bestaudio/best[height<=360]/best' -o "$fpath" "$1"
        ;;

    3)
        echo "ğŸ”° Option 3 selected."
        echo "âœ… Downloading video with best quality up to 480p"
        yt-dlp -f 'bestvideo[height<=480]+bestaudio/best[height<=480]/best' -o "$fpath" "$1"
        ;;

    4)
        echo "ğŸ”° Option 4 selected."
        echo "âœ… Downloading video with best quality up to 720p"
        yt-dlp -f 'bestvideo[height<=720]+bestaudio/best[height<=720]/best' -o "$fpath" "$1"
        ;;

    5)
        echo "ğŸ”° Option 5 selected."
        echo "âœ… Downloading video with best quality up to 1080p"
        yt-dlp -f 'bestvideo[height<=1080]+bestaudio/best[height<=1080]/best' -o "$fpath" "$1"
        ;;

    6)
        echo "ğŸ”° Option 6 selected."
        echo "âœ… Downloading video with best quality up to 2160p"
        yt-dlp -f 'bestvideo[height<=2160]+bestaudio/best[height<=2160]/best' -o "$fpath" "$1"
        ;;

    7)
       if [ ! -s "$fb_cookies" ]; then
        echo -e "\e[031mâŒ Cookies not found Use Option 0 first.!\e[0m"
        exit 1

       fi
        yt-dlp \
        --cookies "$fb_cookies" \
        -f "bestvideo[vcodec^=avc1][height<=1080]+bestaudio[acodec^=mp4a]/best" \
        --merge-output-format mp4 \
        -o "$fpath" "$1"
        ;;

    8)
        echo "âœ… Option 8 selected.!"
        echo -e "\e[032mâœ… Author : ğ“†©ğˆğŒ ğ‚ğğğ‹ ğğğğ˜ ğ“¢ğ“±ğ“ªğ“­ğ“¸ğ”€ ğ“šğ“²ğ“·ğ“° ğ“†ª\e[0m"
        echo -e "\e[032mâœ… Github : https://github.com/imcoolbooy\e[0m"
        echo -e "\e[032mâœ… ğ—£ğ—¢ğ—ªğ—˜ğ—¥ ğ—•ğ—¬ : ğ‘¬ğ‘»ğ‘¯ğ‘°ğ‘ªğ‘¨ğ‘³ ğ‘ªğ’€ğ‘©ğ‘¬ğ‘¹ğ‘ºğ‘¬ğ‘ªğ‘¼ğ‘¹ğ‘°ğ‘»ğ’€ â„¢\e[0m"
        echo -e "\e[031mâœ… Exiting...\e[0m"
        exit 0
        ;;
 A|a)
    echo -e "\e[036mğŸ”° MEDIA DOWNLOADER v3.0
\e[032mDownload Google Videos, Music & Facebook content
\e[036mğŸ‘¨â€ğŸ’» Developer: ğ“†©ğˆğŒ ğ‚ğğğ‹ ğğğğ˜ ğ“¢ğ“±ğ“ªğ“­ğ“¸ğ”€ ğ“šğ“²ğ“·ğ“° ğ“†ª"
    ;;
    *)
        echo -e "\e[031ğŸ”„ mInvalid option. Downloading best available video..!\e[0m"
        yt-dlp -f best --merge-output-format mp4 -o "$fpath" "$1"
        ;;
esac
